{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useMemo}from\"react\";import{MDBNavbar,MDBNavbarBrand,MDBNavbarNav,MDBNavItem,MDBNavbarToggler,MDBCollapse,MDBDropdown,MDBDropdownToggle,MDBDropdownMenu,MDBDropdownItem}from\"mdbreact\";import{BrowserRouter as Router,useHistory}from\"react-router-dom\";import\"./navnew.css\";import{auth}from\"../Frontfirebase\";import usercontext from\"../context/usercontext\";import axios from\"axios\";import{Nav}from\"react-bootstrap\";var NavbarPage=function NavbarPage(_ref){var SetshowDropdown=_ref.SetshowDropdown,showDropdown=_ref.showDropdown;var _useContext=useContext(usercontext),user=_useContext.user;var _useState=useState(),_useState2=_slicedToArray(_useState,2),displayname=_useState2[0],setDisplayname=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),admin=_useState4[0],setAdmin=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isOpen=_useState8[0],setIsopen=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),search=_useState10[0],Setsearch=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),searching=_useState12[0],Setsearching=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),lastsearch=_useState14[0],Setlastsearch=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),refresh=_useState16[0],Setrefresh=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),allpost=_useState18[0],Setallpost=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),haha=_useState20[0],Sethaha=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),error=_useState22[0],Seterror=_useState22[1];var history=useHistory();var i=0;//forsearch\nvar logout=function logout(){auth.signOut().then(function(){console.log(\"Signout\");}).catch(function(err){console.log(err);});};var toggleCollapse=function toggleCollapse(){setIsopen(!isOpen);};var handlesearch=function handlesearch(){try{if(search){var getdata=allpost.filter(function(doc){return doc.name.toLowerCase().includes(search.toLowerCase())||doc.surname.toLowerCase().includes(search.toLowerCase())||doc.accountnumber.includes(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).includes(search.toLowerCase());});Setsearch(\"\");if(getdata){console.log(getdata);history.push({pathname:\"/entersearch\",search:\"?are you ok\",state:{getdata:getdata,search:search}});}}}catch(err){console.log(err);}};var ok=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getallthief,getallpost,getthief;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:7000/thief/thief\");case 3:getallthief=_context.sent;Setsearching(getallthief.data.item);_context.next=7;return axios.get(\"http://localhost:7000/post/post\");case 7:getallpost=_context.sent;Setallpost(getallpost.data.item);getthief=getallthief.data.item;if(search){Seterror();Setlastsearch(getthief.filter(function(doc){if((doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).startsWith(search.toLowerCase())){Sethaha(true);}if(doc.accountnumber.startsWith(search)){Sethaha(true);}if(doc.name.toLowerCase().startsWith(search.toLowerCase())){Sethaha(true);}if(doc.surname.toLowerCase().startsWith(search.toLowerCase())){Sethaha(true);}return doc.name.toLowerCase().startsWith(search.toLowerCase())||doc.surname.toLowerCase().startsWith(search.toLowerCase())||doc.accountnumber.startsWith(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).startsWith(search.toLowerCase());}));}if(!search){Setlastsearch();}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function ok(){return _ref2.apply(this,arguments);};}();useMemo(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!user){_context2.next=3;break;}_context2.next=3;return axios.post(\"http://localhost:7000/user/session\",{user:user}).then(function(result){if(result.data.data.role===\"admin\"){setAdmin(true);}setDisplayname(result.data.data.username);setLoading(false);}).catch(function(err){console.log(err);});case 3:_context2.next=5;return ok();case 5:setLoading(false);case 6:case\"end\":return _context2.stop();}}},_callee2);})),[user,search]);return loading?\"\":admin?/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(MDBNavbar,{light:true,expand:\"lg\",className:\"navbarnew navbar-expand-lg\",children:[/*#__PURE__*/_jsx(MDBNavbarBrand,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo-mf.png\",className:\"logo-nav\"})}),/*#__PURE__*/_jsx(MDBNavbarToggler,{onClick:toggleCollapse}),/*#__PURE__*/_jsx(MDBCollapse,{id:\"navbarCollapse3\",isOpen:isOpen,navbar:true,children:/*#__PURE__*/_jsxs(MDBNavbarNav,{left:true,className:\"center-nav\",children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:\" \\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C \"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/report\",children:\"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E07\\u0E32\\u0E19\"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{onClick:logout,href:\"/login\",children:\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]})})]})}):/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(MDBNavbar,{light:true,expand:\"md\",className:\"navbarnew\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo-mf.png\",className:\"logo-nav\"})}),/*#__PURE__*/_jsx(MDBNavbarToggler,{onClick:toggleCollapse}),/*#__PURE__*/_jsxs(MDBCollapse,{id:\"navbarCollapse3\",isOpen:isOpen,navbar:true,children:[/*#__PURE__*/_jsxs(MDBNavbarNav,{left:true,className:\"center-nav\",children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,caret:true,children:\"\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\"}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"dropdown-default dropdown-top1\",children:[/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/post\",children:\"\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/linkruleshow\",children:\"\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\"})]})]})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/ranking\",children:\"\\u0E08\\u0E31\\u0E14\\u0E2D\\u0E31\\u0E19\\u0E14\\u0E31\\u0E1A\\u0E04\\u0E19\\u0E42\\u0E01\\u0E07\"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsxs(MDBDropdown,{className:\"\",children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,caret:true,children:\"\\u0E0A\\u0E48\\u0E27\\u0E22\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"dropdown-default dropdown-top2\",children:[/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/prevent\",children:\"\\u0E23\\u0E39\\u0E49\\u0E44\\u0E27\\u0E49\\u0E44\\u0E21\\u0E48\\u0E42\\u0E14\\u0E19\\u0E42\\u0E01\\u0E07\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/help\",children:\"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\\u0E43\\u0E2B\\u0E49\\u0E04\\u0E27\\u0E32\\u0E21\\u0E0A\\u0E48\\u0E27\\u0E22\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"})]})]})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/contractus\",children:\"\\u0E15\\u0E34\\u0E14\\u0E15\\u0E48\\u0E2D\"})})]}),/*#__PURE__*/_jsxs(MDBNavbarNav,{right:true,children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(\"div\",{className:\" my-0\",children:/*#__PURE__*/_jsx(\"input\",{className:\"box-nav mr-sm-2\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\",\"aria-label\":\"Search\",value:search,onChange:function onChange(e){Setsearch(e.target.value);SetshowDropdown(true);}})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handlesearch();},className:\"button-nav\",children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"}),/*#__PURE__*/_jsx(MDBNavItem,{children:user?/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{nav:true,caret:true,left:true,children:displayname}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"dropdown-default dropdown-bottom\",right:true,children:[/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/profile/\".concat(user.uid),children:\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/post/history\",children:\"\\u0E1B\\u0E23\\u0E30\\u0E27\\u0E31\\u0E15\\u0E34\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"line-nav\"}),/*#__PURE__*/_jsx(MDBDropdownItem,{href:\"/login\",onClick:logout,children:\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"})]})]}):/*#__PURE__*/_jsx(Nav.Link,{href:\"/login\",children:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gg\",children:[lastsearch?lastsearch.map(function(doc){var thiefid=doc.accountnumber;i++;return/*#__PURE__*/_jsx(\"div\",{className:\"boxsearch-nav\",children:i<=10?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",haha?showDropdown?/*#__PURE__*/_jsx(\"button\",{className:\"search-nav\",onClick:function onClick(){return history.push(\"/thief/post/\".concat(thiefid)),window.location.reload(true);},children:/*#__PURE__*/_jsxs(\"div\",{children:[\" \",doc.name,\" \",doc.surname,\" \",doc.accountnumber]})}):null:null]}):null});}):null,lastsearch?showDropdown?/*#__PURE__*/_jsxs(\"div\",{className:\"dropsearch-nav\",onClick:function onClick(){return handlesearch();},children:[\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32 \",search]}):null:null]})]});};export default NavbarPage;","map":{"version":3,"sources":["D:/monkeyfruad/frontend/src/user/components/navnew.js"],"names":["React","useContext","useState","useMemo","MDBNavbar","MDBNavbarBrand","MDBNavbarNav","MDBNavItem","MDBNavbarToggler","MDBCollapse","MDBDropdown","MDBDropdownToggle","MDBDropdownMenu","MDBDropdownItem","BrowserRouter","Router","useHistory","auth","usercontext","axios","Nav","NavbarPage","SetshowDropdown","showDropdown","user","displayname","setDisplayname","admin","setAdmin","loading","setLoading","isOpen","setIsopen","search","Setsearch","searching","Setsearching","lastsearch","Setlastsearch","refresh","Setrefresh","allpost","Setallpost","haha","Sethaha","error","Seterror","history","i","logout","signOut","then","console","log","catch","err","toggleCollapse","handlesearch","getdata","filter","doc","name","toLowerCase","includes","surname","accountnumber","push","pathname","state","ok","get","getallthief","data","item","getallpost","getthief","startsWith","post","result","role","username","e","target","value","uid","map","thiefid","window","location","reload"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useMemo } from \"react\";\r\nimport {\r\n  MDBNavbar,\r\n  MDBNavbarBrand,\r\n  MDBNavbarNav,\r\n  MDBNavItem,\r\n  MDBNavbarToggler,\r\n  MDBCollapse,\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem,\r\n} from \"mdbreact\";\r\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\r\nimport \"./navnew.css\";\r\nimport { auth } from \"../Frontfirebase\";\r\nimport usercontext from \"../context/usercontext\";\r\nimport axios from \"axios\";\r\nimport { Nav } from \"react-bootstrap\";\r\nconst NavbarPage = ({ SetshowDropdown, showDropdown }) => {\r\n  var { user } = useContext(usercontext);\r\n  const [displayname, setDisplayname] = useState();\r\n  const [admin, setAdmin] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isOpen, setIsopen] = useState(false);\r\n  const [search, Setsearch] = useState();\r\n  const [searching, Setsearching] = useState();\r\n  const [lastsearch, Setlastsearch] = useState();\r\n  const [refresh, Setrefresh] = useState();\r\n  const [allpost, Setallpost] = useState();\r\n\r\n  const [haha, Sethaha] = useState();\r\n  const [error, Seterror] = useState();\r\n\r\n  let history = useHistory();\r\n  let i = 0; //forsearch\r\n\r\n  const logout = () => {\r\n    auth\r\n      .signOut()\r\n      .then(() => {\r\n        console.log(\"Signout\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const toggleCollapse = () => {\r\n    setIsopen(!isOpen);\r\n  };\r\n\r\n  const handlesearch = () => {\r\n    try {\r\n      if (search) {\r\n        const getdata = allpost.filter((doc) => {\r\n          return (\r\n            doc.name.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.surname.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.accountnumber.includes(search) ||\r\n            (doc.name.toLowerCase() + \" \" + doc.surname.toLowerCase()).includes(\r\n              search.toLowerCase()\r\n            )\r\n          );\r\n        });\r\n        Setsearch(\"\");\r\n        if (getdata) {\r\n          console.log(getdata);\r\n          history.push({\r\n            pathname: \"/entersearch\",\r\n            search: \"?are you ok\",\r\n            state: {\r\n              getdata,\r\n              search,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const ok = async () => {\r\n    try {\r\n      const getallthief = await axios.get(`http://localhost:7000/thief/thief`);\r\n      Setsearching(getallthief.data.item);\r\n      const getallpost = await axios.get(`http://localhost:7000/post/post`);\r\n      Setallpost(getallpost.data.item);\r\n      const getthief = getallthief.data.item;\r\n\r\n      if (search) {\r\n        Seterror();\r\n        Setlastsearch(\r\n          getthief.filter((doc) => {\r\n            if (\r\n              (\r\n                doc.name.toLowerCase() +\r\n                \" \" +\r\n                doc.surname.toLowerCase()\r\n              ).startsWith(search.toLowerCase())\r\n            ) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.accountnumber.startsWith(search)) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.name.toLowerCase().startsWith(search.toLowerCase())) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.surname.toLowerCase().startsWith(search.toLowerCase())) {\r\n              Sethaha(true);\r\n            }\r\n\r\n            return (\r\n              doc.name.toLowerCase().startsWith(search.toLowerCase()) ||\r\n              doc.surname.toLowerCase().startsWith(search.toLowerCase()) ||\r\n              doc.accountnumber.startsWith(search) ||\r\n              (\r\n                doc.name.toLowerCase() +\r\n                \" \" +\r\n                doc.surname.toLowerCase()\r\n              ).startsWith(search.toLowerCase())\r\n            );\r\n          })\r\n        );\r\n      }\r\n      if (!search) {\r\n        Setlastsearch();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  useMemo(async () => {\r\n    if (user) {\r\n      await axios\r\n        .post(\"http://localhost:7000/user/session\", { user: user })\r\n        .then((result) => {\r\n          if (result.data.data.role === \"admin\") {\r\n            setAdmin(true);\r\n          }\r\n          setDisplayname(result.data.data.username);\r\n          setLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n    await ok();\r\n    setLoading(false);\r\n  }, [user, search]);\r\n\r\n  return loading ? (\r\n    \"\"\r\n  ) : admin ? (\r\n    <Router>\r\n      <MDBNavbar light expand=\"lg\" className=\"navbarnew navbar-expand-lg\">\r\n        <MDBNavbarBrand href=\"/\">\r\n          <img src=\"/img/logo-mf.png\" className=\"logo-nav\" />\r\n        </MDBNavbarBrand>\r\n        <MDBNavbarToggler onClick={toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={isOpen} navbar>\r\n          <MDBNavbarNav left className=\"center-nav\">\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/\"> จัดการโพสต์ </Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/report\">ดูรายงาน</Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link onClick={logout} href=\"/login\">\r\n                ออกจากระบบ\r\n              </Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n    </Router>\r\n  ) : (\r\n    <Router>\r\n      <MDBNavbar light expand=\"md\" className=\"navbarnew\">\r\n        <Nav.Link href=\"/\">\r\n          <img src=\"/img/logo-mf.png\" className=\"logo-nav\" />\r\n        </Nav.Link>\r\n        <MDBNavbarToggler onClick={toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={isOpen} navbar>\r\n          <MDBNavbarNav left className=\"center-nav\">\r\n            <MDBNavItem>\r\n              <MDBDropdown>\r\n                <MDBDropdownToggle nav caret>\r\n                  โพสต์\r\n                </MDBDropdownToggle>\r\n                <MDBDropdownMenu className=\"dropdown-default dropdown-top1\">\r\n                  <MDBDropdownItem href=\"/post\">โพสต์ทั้งหมด</MDBDropdownItem>\r\n                  <MDBDropdownItem href=\"/linkruleshow\">\r\n                    สร้างโพสต์\r\n                  </MDBDropdownItem>\r\n                </MDBDropdownMenu>\r\n              </MDBDropdown>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/ranking\">จัดอันดับคนโกง</Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <MDBDropdown className=\"\">\r\n                <MDBDropdownToggle nav caret>\r\n                  ช่วยเหลือ\r\n                </MDBDropdownToggle>\r\n                <MDBDropdownMenu className=\"dropdown-default dropdown-top2\">\r\n                  <MDBDropdownItem href=\"/prevent\">\r\n                    รู้ไว้ไม่โดนโกง\r\n                  </MDBDropdownItem>\r\n                  <MDBDropdownItem href=\"/help\">\r\n                    หน่วยงานที่ให้ความช่วยเหลือ\r\n                  </MDBDropdownItem>\r\n                </MDBDropdownMenu>\r\n              </MDBDropdown>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/contractus\">ติดต่อ</Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n          <MDBNavbarNav right>\r\n            <MDBNavItem>\r\n              <div className=\" my-0\">\r\n                <input\r\n                  className=\"box-nav mr-sm-2\"\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหาด้วยชื่อหรือเลขที่บัญชี\"\r\n                  aria-label=\"Search\"\r\n                  value={search}\r\n                  onChange={(e) => {\r\n                    Setsearch(e.target.value);\r\n                    SetshowDropdown(true);\r\n                  }}\r\n                />\r\n              </div>\r\n            </MDBNavItem>\r\n\r\n            <button onClick={() => handlesearch()} className=\"button-nav\">\r\n              ค้นหา\r\n            </button>\r\n            <MDBNavItem>\r\n              {user ? (\r\n                <MDBDropdown>\r\n                  <MDBDropdownToggle nav caret left>\r\n                    {displayname}\r\n                  </MDBDropdownToggle>\r\n                  <MDBDropdownMenu\r\n                    className=\"dropdown-default dropdown-bottom\"\r\n                    right\r\n                  >\r\n                    <MDBDropdownItem href={`/profile/${user.uid}`}>\r\n                      จัดการโปรไฟล์\r\n                    </MDBDropdownItem>\r\n                    <MDBDropdownItem href=\"/post/history\">\r\n                      ประวัติการโพสต์\r\n                    </MDBDropdownItem>\r\n                    <div className=\"line-nav\"></div>\r\n                    <MDBDropdownItem href=\"/login\" onClick={logout}>\r\n                      ออกจากระบบ\r\n                    </MDBDropdownItem>\r\n                  </MDBDropdownMenu>\r\n                </MDBDropdown>\r\n              ) : (\r\n                <Nav.Link href=\"/login\">เข้าสู่ระบบ</Nav.Link>\r\n              )}\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n      <div className=\"gg\">\r\n        {lastsearch\r\n          ? lastsearch.map((doc) => {\r\n              let thiefid = doc.accountnumber;\r\n              i++;\r\n              return (\r\n                <div className=\"boxsearch-nav\">\r\n                  {i <= 10 ? (\r\n                    <div>\r\n                      {\" \"}\r\n                      {haha ? (\r\n                        showDropdown ? (\r\n                          <button\r\n                            className=\"search-nav\"\r\n                            onClick={() => (\r\n                              history.push(`/thief/post/${thiefid}`),\r\n                              window.location.reload(true)\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              {\" \"}\r\n                              {doc.name} {doc.surname} {doc.accountnumber}\r\n                            </div>\r\n                          </button>\r\n                        ) : null\r\n                      ) : null}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              );\r\n            })\r\n          : null}\r\n        {lastsearch ? (\r\n          showDropdown ? (\r\n            <div className=\"dropsearch-nav\" onClick={() => handlesearch()}>\r\n              ค้นหา {search}\r\n            </div>\r\n          ) : null\r\n        ) : null}\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default NavbarPage;\r\n"]},"metadata":{},"sourceType":"module"}