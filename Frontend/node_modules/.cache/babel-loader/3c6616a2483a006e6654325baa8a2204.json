{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import{MDBNavbar,MDBNavbarBrand,MDBNavbarNav,MDBNavItem,MDBNavbarToggler,MDBCollapse,MDBDropdown,MDBDropdownToggle,MDBDropdownMenu,MDBDropdownItem,MDBBtn}from\"mdbreact\";import{BrowserRouter as Router,useHistory}from\"react-router-dom\";import\"../../user/components/navnew.css\";import{auth}from\"../../user/Frontfirebase\";import usercontext from\"../../user/context/usercontext\";import axios from\"axios\";import*as moment from\"moment\";import\"moment/locale/th\";import{Nav}from\"react-bootstrap\";import Cliploading from\"../../user/components/clipLoader\";var NavbarPage=function NavbarPage(props){var _useContext=useContext(usercontext),user=_useContext.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),admin=_useState2[0],setAdmin=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOpen=_useState6[0],setIsopen=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],Setsearch=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),searching=_useState10[0],Setsearching=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),lastsearch=_useState12[0],Setlastsearch=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),refresh=_useState14[0],Setrefresh=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),allpost=_useState16[0],Setallpost=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),haha=_useState18[0],Sethaha=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),error=_useState20[0],Seterror=_useState20[1];var history=useHistory();var i=0;//forsearch\nvar logout=function logout(){auth.signOut().then(function(){console.log(\"Signout\");}).catch(function(err){console.log(err);});};var toggleCollapse=function toggleCollapse(){setIsopen(!isOpen);};var handlesearch=function handlesearch(){try{if(search){var getdata=allpost.filter(function(doc){return doc.name.toLowerCase().includes(search.toLowerCase())||doc.surname.toLowerCase().includes(search.toLowerCase())||doc.accountnumber.includes(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).includes(search.toLowerCase());});Setsearch(\"\");if(getdata){console.log(getdata);history.push({pathname:\"/adminentersearch\",search:\"?are you ok\",state:{getdata:getdata,search:search}});}}}catch(err){console.log(err);}};var adminhandlesearch=function adminhandlesearch(){try{if(search){var getdata=allpost.filter(function(doc){return doc.name.toLowerCase().includes(search.toLowerCase())||doc.surname.toLowerCase().includes(search.toLowerCase())||doc.accountnumber.includes(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).includes(search.toLowerCase());});Setsearch(\"\");if(getdata){console.log(getdata);history.push({pathname:\"/adminentersearch\",search:\"?are you ok\",state:{getdata:getdata,search:search}});}}}catch(err){console.log(err);}};var initSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getallthief,getallpost,getthief;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://monkeyfruad01.herokuapp.com/thief/thief\");case 3:getallthief=_context.sent;Setsearching(getallthief.data.item);_context.next=7;return axios.get(\"https://monkeyfruad01.herokuapp.com/post/post\");case 7:getallpost=_context.sent;Setallpost(getallpost.data.item);getthief=getallthief.data.item;if(search){Seterror();Setlastsearch(getthief.filter(function(doc){if((doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).startsWith(search.toLowerCase())){Sethaha(true);}if(doc.accountnumber.startsWith(search)){Sethaha(true);}if(doc.name.toLowerCase().startsWith(search.toLowerCase())){Sethaha(true);}if(doc.surname.toLowerCase().startsWith(search.toLowerCase())){Sethaha(true);}return doc.name.toLowerCase().startsWith(search.toLowerCase())||doc.surname.toLowerCase().startsWith(search.toLowerCase())||doc.accountnumber.startsWith(search)||(doc.name.toLowerCase()+\" \"+doc.surname.toLowerCase()).startsWith(search.toLowerCase());}));}if(!search){Setlastsearch();}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function initSearch(){return _ref.apply(this,arguments);};}();var initUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"https://monkeyfruad01.herokuapp.com/user/session\",{user:user}).then(function(result){if(result.data.data.role===\"admin\"){setAdmin(true);}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function initUser(){return _ref2.apply(this,arguments);};}();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!user){_context3.next=4;break;}_context3.next=3;return initUser();case 3:setLoading(false);case 4:initSearch();setLoading(false);case 6:case\"end\":return _context3.stop();}}},_callee3);})),[user,search]);return admin?/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(MDBNavbar,{light:true,expand:\"lg\",className:\"navbarnew navbar-expand-lg\",children:[/*#__PURE__*/_jsx(MDBNavbarBrand,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo-mf.png\",className:\"logo-nav\"})}),/*#__PURE__*/_jsx(MDBNavbarToggler,{onClick:toggleCollapse}),/*#__PURE__*/_jsxs(MDBCollapse,{id:\"navbarCollapse3\",isOpen:isOpen,navbar:true,children:[/*#__PURE__*/_jsxs(MDBNavbarNav,{left:true,className:\"center-nav\",children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:\" \\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C \"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/report\",children:\"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E07\\u0E32\\u0E19\"})})]}),/*#__PURE__*/_jsxs(MDBNavbarNav,{right:true,children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(\"div\",{className:\" my-0\",children:/*#__PURE__*/_jsx(\"input\",{className:\"box-nav mr-sm-2\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\",\"aria-label\":\"Search\",value:search,onChange:function onChange(e){Setsearch(e.target.value);props.SetshowDropdown(true);}})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return adminhandlesearch();},className:\"button-nav\",children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{onClick:logout,href:\"/login\",children:\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ggadmin\",children:[lastsearch?lastsearch.map(function(doc){var thiefNameAndSurname=\"\".concat(doc.name,\" \").concat(doc.surname);console.log(thiefNameAndSurname);i++;return/*#__PURE__*/_jsx(\"div\",{className:\"boxsearch-nav\",children:i<=10?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",haha?props.showDropdown?/*#__PURE__*/_jsx(\"button\",{className:\"search-nav\",onClick:function onClick(){return history.push({pathname:\"/admin/thief/post/\".concat(thiefNameAndSurname),search:\"?are you ok\"}),window.location.reload(true);},children:/*#__PURE__*/_jsxs(\"div\",{children:[\" \",doc.name,\" \",doc.surname,\" \",doc.accountnumber]})}):null:null]}):null});}):null,lastsearch?props.showDropdown?/*#__PURE__*/_jsxs(\"div\",{className:\"dropsearch-nav\",onClick:function onClick(){return adminhandlesearch();},children:[\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32 \",search]}):null:null]})]}):/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(MDBNavbar,{light:true,expand:\"lg\",className:\"navbarnew navbar-expand-lg\",children:[/*#__PURE__*/_jsx(MDBNavbarBrand,{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo-mf.png\",className:\"logo-nav\"})}),/*#__PURE__*/_jsx(MDBNavbarToggler,{onClick:toggleCollapse}),/*#__PURE__*/_jsxs(MDBCollapse,{id:\"navbarCollapse3\",isOpen:isOpen,navbar:true,children:[/*#__PURE__*/_jsxs(MDBNavbarNav,{left:true,className:\"center-nav\",children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:\" \\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C \"})}),/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(Nav.Link,{href:\"/report\",children:\"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E07\\u0E32\\u0E19\"})})]}),/*#__PURE__*/_jsxs(MDBNavbarNav,{right:true,children:[/*#__PURE__*/_jsx(MDBNavItem,{children:/*#__PURE__*/_jsx(\"div\",{className:\" my-0\",children:/*#__PURE__*/_jsx(\"input\",{className:\"box-nav mr-sm-2\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E14\\u0E49\\u0E27\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\",\"aria-label\":\"Search\",value:search,onChange:function onChange(e){Setsearch(e.target.value);props.SetshowDropdown(true);}})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return adminhandlesearch();},className:\"button-nav\",children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gg\",children:[lastsearch?lastsearch.map(function(doc){var thiefNameAndSurname=\"\".concat(doc.name,\" \").concat(doc.surname);console.log(thiefNameAndSurname);i++;return/*#__PURE__*/_jsx(\"div\",{className:\"boxsearch-nav\",children:i<=10?/*#__PURE__*/_jsxs(\"div\",{children:[\" \",haha?props.showDropdown?/*#__PURE__*/_jsx(\"button\",{className:\"search-nav\",onClick:function onClick(){return history.push({pathname:\"/thief/post/\".concat(thiefNameAndSurname),search:\"?are you ok\"}),window.location.reload(true);},children:/*#__PURE__*/_jsxs(\"div\",{children:[\" \",doc.name,\" \",doc.surname,\" \",doc.accountnumber]})}):null:null]}):null});}):null,lastsearch?props.showDropdown?/*#__PURE__*/_jsxs(\"div\",{className:\"dropsearch-nav\",onClick:function onClick(){return handlesearch();},children:[\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32 \",search]}):null:null]})]});};export default NavbarPage;","map":{"version":3,"sources":["D:/monkeyfruad/frontend/src/admin/components/navbarAdmin.js"],"names":["React","useContext","useState","useEffect","MDBNavbar","MDBNavbarBrand","MDBNavbarNav","MDBNavItem","MDBNavbarToggler","MDBCollapse","MDBDropdown","MDBDropdownToggle","MDBDropdownMenu","MDBDropdownItem","MDBBtn","BrowserRouter","Router","useHistory","auth","usercontext","axios","moment","Nav","Cliploading","NavbarPage","props","user","admin","setAdmin","loading","setLoading","isOpen","setIsopen","search","Setsearch","searching","Setsearching","lastsearch","Setlastsearch","refresh","Setrefresh","allpost","Setallpost","haha","Sethaha","error","Seterror","history","i","logout","signOut","then","console","log","catch","err","toggleCollapse","handlesearch","getdata","filter","doc","name","toLowerCase","includes","surname","accountnumber","push","pathname","state","adminhandlesearch","initSearch","get","getallthief","data","item","getallpost","getthief","startsWith","initUser","post","result","role","e","target","value","SetshowDropdown","map","thiefNameAndSurname","showDropdown","window","location","reload"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport {\r\n  MDBNavbar,\r\n  MDBNavbarBrand,\r\n  MDBNavbarNav,\r\n  MDBNavItem,\r\n  MDBNavbarToggler,\r\n  MDBCollapse,\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem,\r\n  MDBBtn,\r\n} from \"mdbreact\";\r\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\r\nimport \"../../user/components/navnew.css\";\r\nimport { auth } from \"../../user/Frontfirebase\";\r\nimport usercontext from \"../../user/context/usercontext\";\r\nimport axios from \"axios\";\r\nimport * as moment from \"moment\";\r\nimport \"moment/locale/th\";\r\nimport { Nav } from \"react-bootstrap\";\r\nimport Cliploading from \"../../user/components/clipLoader\";\r\n\r\nconst NavbarPage = (props) => {\r\n  var { user } = useContext(usercontext);\r\n  const [admin, setAdmin] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isOpen, setIsopen] = useState(false);\r\n  const [search, Setsearch] = useState();\r\n  const [searching, Setsearching] = useState();\r\n  const [lastsearch, Setlastsearch] = useState();\r\n  const [refresh, Setrefresh] = useState();\r\n  const [allpost, Setallpost] = useState();\r\n  const [haha, Sethaha] = useState();\r\n  const [error, Seterror] = useState();\r\n  let history = useHistory();\r\n  let i = 0; //forsearch\r\n\r\n  const logout = () => {\r\n    auth\r\n      .signOut()\r\n      .then(() => {\r\n        console.log(\"Signout\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const toggleCollapse = () => {\r\n    setIsopen(!isOpen);\r\n  };\r\n  const handlesearch = () => {\r\n    try {\r\n      if (search) {\r\n        const getdata = allpost.filter((doc) => {\r\n          return (\r\n            doc.name.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.surname.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.accountnumber.includes(search) ||\r\n            (doc.name.toLowerCase() + \" \" + doc.surname.toLowerCase()).includes(\r\n              search.toLowerCase()\r\n            )\r\n          );\r\n        });\r\n        Setsearch(\"\");\r\n        if (getdata) {\r\n          console.log(getdata);\r\n          history.push({\r\n            pathname: \"/adminentersearch\",\r\n            search: \"?are you ok\",\r\n            state: {\r\n              getdata,\r\n              search,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const adminhandlesearch = () => {\r\n    try {\r\n      if (search) {\r\n        const getdata = allpost.filter((doc) => {\r\n          return (\r\n            doc.name.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.surname.toLowerCase().includes(search.toLowerCase()) ||\r\n            doc.accountnumber.includes(search) ||\r\n            (doc.name.toLowerCase() + \" \" + doc.surname.toLowerCase()).includes(\r\n              search.toLowerCase()\r\n            )\r\n          );\r\n        });\r\n        Setsearch(\"\");\r\n        if (getdata) {\r\n          console.log(getdata);\r\n          history.push({\r\n            pathname: \"/adminentersearch\",\r\n            search: \"?are you ok\",\r\n            state: {\r\n              getdata,\r\n              search,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const initSearch = async () => {\r\n    try {\r\n      const getallthief = await axios.get(\r\n        `https://monkeyfruad01.herokuapp.com/thief/thief`\r\n      );\r\n      Setsearching(getallthief.data.item);\r\n      const getallpost = await axios.get(\r\n        `https://monkeyfruad01.herokuapp.com/post/post`\r\n      );\r\n      Setallpost(getallpost.data.item);\r\n      const getthief = getallthief.data.item;\r\n      if (search) {\r\n        Seterror();\r\n        Setlastsearch(\r\n          getthief.filter((doc) => {\r\n            if (\r\n              (\r\n                doc.name.toLowerCase() +\r\n                \" \" +\r\n                doc.surname.toLowerCase()\r\n              ).startsWith(search.toLowerCase())\r\n            ) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.accountnumber.startsWith(search)) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.name.toLowerCase().startsWith(search.toLowerCase())) {\r\n              Sethaha(true);\r\n            }\r\n            if (doc.surname.toLowerCase().startsWith(search.toLowerCase())) {\r\n              Sethaha(true);\r\n            }\r\n            return (\r\n              doc.name.toLowerCase().startsWith(search.toLowerCase()) ||\r\n              doc.surname.toLowerCase().startsWith(search.toLowerCase()) ||\r\n              doc.accountnumber.startsWith(search) ||\r\n              (\r\n                doc.name.toLowerCase() +\r\n                \" \" +\r\n                doc.surname.toLowerCase()\r\n              ).startsWith(search.toLowerCase())\r\n            );\r\n          })\r\n        );\r\n      }\r\n      if (!search) {\r\n        Setlastsearch();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const initUser = async () => {\r\n    await axios\r\n      .post(\"https://monkeyfruad01.herokuapp.com/user/session\", {\r\n        user: user,\r\n      })\r\n      .then((result) => {\r\n        if (result.data.data.role === \"admin\") {\r\n          setAdmin(true);\r\n        }\r\n      });\r\n  };\r\n  useEffect(async () => {\r\n    if (user) {\r\n      await initUser();\r\n      setLoading(false);\r\n    }\r\n    initSearch();\r\n    setLoading(false);\r\n  }, [user, search]);\r\n  return admin ? (\r\n    <Router>\r\n      <MDBNavbar light expand=\"lg\" className=\"navbarnew navbar-expand-lg\">\r\n        <MDBNavbarBrand href=\"/\">\r\n          <img src=\"/img/logo-mf.png\" className=\"logo-nav\" />\r\n        </MDBNavbarBrand>\r\n        <MDBNavbarToggler onClick={toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={isOpen} navbar>\r\n          <MDBNavbarNav left className=\"center-nav\">\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/\"> จัดการโพสต์ </Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/report\">ดูรายงาน</Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n          <MDBNavbarNav right>\r\n            <MDBNavItem>\r\n              <div className=\" my-0\">\r\n                <input\r\n                  className=\"box-nav mr-sm-2\"\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหาด้วยชื่อหรือเลขที่บัญชี\"\r\n                  aria-label=\"Search\"\r\n                  value={search}\r\n                  onChange={(e) => {\r\n                    Setsearch(e.target.value);\r\n                    props.SetshowDropdown(true);\r\n                  }}\r\n                />\r\n              </div>\r\n            </MDBNavItem>\r\n\r\n            <button onClick={() => adminhandlesearch()} className=\"button-nav\">\r\n              ค้นหา\r\n            </button>\r\n            <MDBNavItem>\r\n              <Nav.Link onClick={logout} href=\"/login\">\r\n                ออกจากระบบ\r\n              </Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n      <div className=\"ggadmin\">\r\n        {lastsearch\r\n          ? lastsearch.map((doc) => {\r\n              let thiefNameAndSurname = `${doc.name} ${doc.surname}`;\r\n              console.log(thiefNameAndSurname);\r\n              i++;\r\n              return (\r\n                <div className=\"boxsearch-nav\">\r\n                  {i <= 10 ? (\r\n                    <div>\r\n                      {\" \"}\r\n                      {haha ? (\r\n                        props.showDropdown ? (\r\n                          <button\r\n                            className=\"search-nav\"\r\n                            onClick={() => (\r\n                              history.push({\r\n                                pathname: `/admin/thief/post/${thiefNameAndSurname}`,\r\n                                search: \"?are you ok\",\r\n                              }),\r\n                              window.location.reload(true)\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              {\" \"}\r\n                              {doc.name} {doc.surname} {doc.accountnumber}\r\n                            </div>\r\n                          </button>\r\n                        ) : null\r\n                      ) : null}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              );\r\n            })\r\n          : null}\r\n        {lastsearch ? (\r\n          props.showDropdown ? (\r\n            <div className=\"dropsearch-nav\" onClick={() => adminhandlesearch()}>\r\n              ค้นหา {search}\r\n            </div>\r\n          ) : null\r\n        ) : null}\r\n      </div>\r\n    </Router>\r\n  ) : (\r\n    <Router>\r\n      <MDBNavbar light expand=\"lg\" className=\"navbarnew navbar-expand-lg\">\r\n        <MDBNavbarBrand href=\"/\">\r\n          <img src=\"/img/logo-mf.png\" className=\"logo-nav\" />\r\n        </MDBNavbarBrand>\r\n        <MDBNavbarToggler onClick={toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={isOpen} navbar>\r\n          <MDBNavbarNav left className=\"center-nav\">\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/\"> จัดการโพสต์ </Nav.Link>\r\n            </MDBNavItem>\r\n            <MDBNavItem>\r\n              <Nav.Link href=\"/report\">ดูรายงาน</Nav.Link>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n          <MDBNavbarNav right>\r\n            <MDBNavItem>\r\n              <div className=\" my-0\">\r\n                <input\r\n                  className=\"box-nav mr-sm-2\"\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหาด้วยชื่อหรือเลขที่บัญชี\"\r\n                  aria-label=\"Search\"\r\n                  value={search}\r\n                  onChange={(e) => {\r\n                    Setsearch(e.target.value);\r\n                    props.SetshowDropdown(true);\r\n                  }}\r\n                />\r\n              </div>\r\n            </MDBNavItem>\r\n\r\n            <button onClick={() => adminhandlesearch()} className=\"button-nav\">\r\n              ค้นหา\r\n            </button>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n      <div className=\"gg\">\r\n        {lastsearch\r\n          ? lastsearch.map((doc) => {\r\n              let thiefNameAndSurname = `${doc.name} ${doc.surname}`;\r\n              console.log(thiefNameAndSurname);\r\n              i++;\r\n              return (\r\n                <div className=\"boxsearch-nav\">\r\n                  {i <= 10 ? (\r\n                    <div>\r\n                      {\" \"}\r\n                      {haha ? (\r\n                        props.showDropdown ? (\r\n                          <button\r\n                            className=\"search-nav\"\r\n                            onClick={() => (\r\n                              history.push({\r\n                                pathname: `/thief/post/${thiefNameAndSurname}`,\r\n                                search: \"?are you ok\",\r\n                              }),\r\n                              window.location.reload(true)\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              {\" \"}\r\n                              {doc.name} {doc.surname} {doc.accountnumber}\r\n                            </div>\r\n                          </button>\r\n                        ) : null\r\n                      ) : null}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              );\r\n            })\r\n          : null}\r\n        {lastsearch ? (\r\n          props.showDropdown ? (\r\n            <div className=\"dropsearch-nav\" onClick={() => handlesearch()}>\r\n              ค้นหา {search}\r\n            </div>\r\n          ) : null\r\n        ) : null}\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default NavbarPage;\r\n"]},"metadata":{},"sourceType":"module"}