{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/monkeyfruad/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useMemo}from\"react\";import\"./ranking.css\";import Chatbot from\"../components/chatbot\";import NavbarPage from\"../components/navnew\";import{MDBCard,MDBCardBody,MDBIcon}from\"mdbreact\";import Axios from\"axios\";import{useHistory}from\"react-router-dom\";import*as moment from\"moment\";import\"moment/locale/th\";var Rank=function Rank(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ThiefRank=_useState2[0],setThiefRank=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),ThiefThreeRank=_useState4[0],setTThiefThreeRank=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),TitleSort=_useState6[0],setTitleSort=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),showDropdown=_useState10[0],SetshowDropdown=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),allpost=_useState12[0],Setallpost=_useState12[1];var history=useHistory();var Hiddendropdown=function Hiddendropdown(){SetshowDropdown(false);};var getInitCount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getThief;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"http://localhost:7000/thief/rankcount\");case 2:getThief=_context.sent;setThiefRank(getThief.data.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getInitCount(){return _ref.apply(this,arguments);};}();var GetInitThiefThreeRank=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var thiefcount;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.get(\"http://localhost:7000/thief/orderbycount\");case 2:thiefcount=_context2.sent;setTThiefThreeRank(thiefcount.data.data);setTitleSort(\"จำนวนครั้งที่โกงมากที่สุด\");case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function GetInitThiefThreeRank(){return _ref2.apply(this,arguments);};}();var GetPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var getallpost;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Axios.get(\"http://localhost:7000/post/post\");case 2:getallpost=_context3.sent;Setallpost(getallpost.data.item);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function GetPost(){return _ref3.apply(this,arguments);};}();var RankSeePost=function RankSeePost(accountnumber){var search=accountnumber;var getdata=allpost.filter(function(doc){return doc.accountnumber.includes(search);});if(getdata){history.push({pathname:\"/entersearch\",search:\"are you ok\",state:{getdata:getdata,search:search}});}};var SelectClick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var getThief,getThreeThief,_getThief,_getThreeThief,_getThief2,_getThreeThief2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(e.target.value===\"ยอดเงินที่โกงสูงสุด\")){_context4.next=12;break;}setTitleSort(e.target.value);_context4.next=4;return Axios.get(\"http://localhost:7000/thief/ranksummoney\");case 4:getThief=_context4.sent;setThiefRank(getThief.data.data);_context4.next=8;return Axios.get(\"http://localhost:7000/thief/orderbysummoney\");case 8:getThreeThief=_context4.sent;setTThiefThreeRank(getThreeThief.data.data);_context4.next=34;break;case 12:if(!(e.target.value===\"วันที่โกงล่าสุด\")){_context4.next=24;break;}setTitleSort(e.target.value);_context4.next=16;return Axios.get(\"http://localhost:7000/thief/rankdatetime\");case 16:_getThief=_context4.sent;setThiefRank(_getThief.data.data);_context4.next=20;return Axios.get(\"http://localhost:7000/thief/orderbydatetimes\");case 20:_getThreeThief=_context4.sent;setTThiefThreeRank(_getThreeThief.data.data);_context4.next=34;break;case 24:if(!(e.target.value===\"จำนวนครั้งที่โกงมากที่สุด\")){_context4.next=34;break;}setTitleSort(e.target.value);_context4.next=28;return Axios.get(\"http://localhost:7000/thief/rankcount\");case 28:_getThief2=_context4.sent;setThiefRank(_getThief2.data.data);_context4.next=32;return Axios.get(\"http://localhost:7000/thief/orderbycount\");case 32:_getThreeThief2=_context4.sent;setTThiefThreeRank(_getThreeThief2.data.data);case 34:case\"end\":return _context4.stop();}}},_callee4);}));return function SelectClick(_x){return _ref4.apply(this,arguments);};}();useMemo(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getInitCount();case 2:_context5.next=4;return GetInitThiefThreeRank();case 4:_context5.next=6;return GetPost();case 6:setLoading(false);case 7:case\"end\":return _context5.stop();}}},_callee5);})),[]);return loading?\"\":/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return Hiddendropdown();},children:[/*#__PURE__*/_jsx(NavbarPage,{SetshowDropdown:SetshowDropdown,showDropdown:showDropdown}),/*#__PURE__*/_jsxs(\"h1\",{className:\"h1-ranking\",children:[\"\\u0E08\\u0E31\\u0E14\\u0E2D\\u0E31\\u0E19\\u0E14\\u0E31\\u0E1A\\u0E04\\u0E19\\u0E42\\u0E01\\u0E07\",/*#__PURE__*/_jsxs(\"span\",{className:\"rank-sort-head\",children:[\"\\u0E40\\u0E23\\u0E35\\u0E22\\u0E07\\u0E15\\u0E32\\u0E21: \",/*#__PURE__*/_jsx(\"span\",{children:TitleSort})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container2-rank\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:ThiefThreeRank?ThiefThreeRank.map(function(element,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"column3-rank\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"coin\".concat(index+1,\"-rank rank-rank1\"),children:index+1}),/*#__PURE__*/_jsxs(MDBCard,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"emty-rank\"}),/*#__PURE__*/_jsxs(MDBCardBody,{cascade:true,className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text3-rank\",children:[\"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35 : \",element.accountnumber,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0E18\\u0E19\\u0E32\\u0E04\\u0E32\\u0E23 : \",element.bank]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text4-rank\",children:[\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E17\\u0E35\\u0E48\\u0E16\\u0E39\\u0E01\\u0E41\\u0E08\\u0E49\\u0E07 : \",element.count,\" \\u0E04\\u0E23\\u0E31\\u0E49\\u0E07 \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0E22\\u0E2D\\u0E14\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 : \",element.summoney.toLocaleString(undefined,{maximumFractionDigits:2}),\" \\u0E1A\\u0E32\\u0E17\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14 :\",\" \",moment(new Date(element.wanteedon.seconds*1000)).format('MM/DD/YYYY HH:mm')]}),/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return RankSeePost(element.accountnumber);},className:\"orange-text mt-1 d-flex justify-content-end align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"readmore-rank\",children:[\"\\u0E14\\u0E39\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\\u0E17\\u0E35\\u0E48\\u0E40\\u0E01\\u0E35\\u0E48\\u0E22\\u0E27\\u0E02\\u0E49\\u0E2D\\u0E07\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\",\" \",/*#__PURE__*/_jsx(MDBIcon,{icon:\"chevron-right\",className:\"ml-2\",size:\"sm\"})]})})]})]})]},index);}):null})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-ranking\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rank-sorting\",children:/*#__PURE__*/_jsxs(\"select\",{as:\"select\",name:\"rank-sort\",className:\"rank-sort-select\",onChange:function onChange(e){SelectClick(e);},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\\u0E21\\u0E32\\u0E01\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E38\\u0E14\",className:\"rank-option\",children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\\u0E21\\u0E32\\u0E01\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E38\\u0E14\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E22\\u0E2D\\u0E14\\u0E40\\u0E07\\u0E34\\u0E19\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\\u0E2A\\u0E39\\u0E07\\u0E2A\\u0E38\\u0E14\",className:\"rank-option\",children:\"\\u0E22\\u0E2D\\u0E14\\u0E40\\u0E07\\u0E34\\u0E19\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\\u0E2A\\u0E39\\u0E07\\u0E2A\\u0E38\\u0E14\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\",className:\"rank-option\",children:\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rank-column-row row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col-1\",children:\"\\u0E2D\\u0E31\\u0E19\\u0E14\\u0E31\\u0E1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:\"\\u0E0A\\u0E37\\u0E48\\u0E2D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:\"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:\"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:\"\\u0E22\\u0E2D\\u0E14\\u0E40\\u0E07\\u0E34\\u0E19\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E42\\u0E01\\u0E07\"})]}),ThiefRank?ThiefRank.map(function(element,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"rank-data-row row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col-1\",children:index+1}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:/*#__PURE__*/_jsx(\"span\",{children:element.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:element.surname}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:element.accountnumber}),/*#__PURE__*/_jsxs(\"div\",{className:\"rank-column cell col\",children:[element.summoney.toLocaleString(undefined,{maximumFractionDigits:2}),/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0\\u0E1A\\u0E32\\u0E17\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:element.count}),/*#__PURE__*/_jsx(\"div\",{className:\"rank-column cell col\",children:moment(new Date(element.wanteedon.seconds*1000)).format('MM/DD/YYYY HH:mm')})]});}):null]}),/*#__PURE__*/_jsx(Chatbot,{})]});};export default Rank;","map":{"version":3,"sources":["D:/monkeyfruad/frontend/src/user/pages/ranking.js"],"names":["React","useState","useMemo","Chatbot","NavbarPage","MDBCard","MDBCardBody","MDBIcon","Axios","useHistory","moment","Rank","ThiefRank","setThiefRank","ThiefThreeRank","setTThiefThreeRank","TitleSort","setTitleSort","loading","setLoading","showDropdown","SetshowDropdown","allpost","Setallpost","history","Hiddendropdown","getInitCount","get","getThief","data","GetInitThiefThreeRank","thiefcount","GetPost","getallpost","item","RankSeePost","accountnumber","search","getdata","filter","doc","includes","push","pathname","state","SelectClick","e","target","value","getThreeThief","map","element","index","bank","count","summoney","toLocaleString","undefined","maximumFractionDigits","Date","wanteedon","seconds","format","name","surname"],"mappings":"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","sourcesContent":["import React, {  useState, useMemo } from \"react\";\r\nimport \"./ranking.css\";\r\nimport Chatbot from \"../components/chatbot\";\r\nimport NavbarPage from \"../components/navnew\";\r\nimport {\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBIcon\r\n} from \"mdbreact\";\r\n\r\nimport Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as moment from \"moment\";\r\nimport \"moment/locale/th\";\r\nconst Rank = () => {\r\n  const [ThiefRank, setThiefRank] = useState([]);\r\n  const [ThiefThreeRank, setTThiefThreeRank] = useState();\r\n  const [TitleSort, setTitleSort] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [showDropdown, SetshowDropdown] = useState(true);\r\n  const [allpost, Setallpost] = useState();\r\n  let history = useHistory();\r\n  const Hiddendropdown = () => {\r\n    SetshowDropdown(false);\r\n  };\r\n  const getInitCount = async () => {\r\n    const getThief = await Axios.get(`http://localhost:7000/thief/rankcount`);\r\n    setThiefRank(getThief.data.data);\r\n  };\r\n  const GetInitThiefThreeRank = async () => {\r\n    const thiefcount = await Axios.get(\r\n      \"http://localhost:7000/thief/orderbycount\"\r\n    );\r\n    setTThiefThreeRank(thiefcount.data.data);\r\n    setTitleSort(\"จำนวนครั้งที่โกงมากที่สุด\");\r\n  };\r\n  const GetPost = async () => {\r\n    const getallpost = await Axios.get(\"http://localhost:7000/post/post\");\r\n    Setallpost(getallpost.data.item);\r\n  };\r\n  const RankSeePost = (accountnumber) => {\r\n    let search = accountnumber;\r\n    const getdata = allpost.filter((doc) => {\r\n      return doc.accountnumber.includes(search);\r\n    });\r\n    if (getdata) {\r\n      history.push({\r\n        pathname: \"/entersearch\",\r\n        search: \"are you ok\",\r\n        state: {\r\n          getdata,\r\n          search,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const SelectClick = async (e) => {\r\n    if (e.target.value === \"ยอดเงินที่โกงสูงสุด\") {\r\n      setTitleSort(e.target.value);\r\n      const getThief = await Axios.get(\r\n        `http://localhost:7000/thief/ranksummoney`\r\n      );\r\n      setThiefRank(getThief.data.data);\r\n      const getThreeThief = await Axios.get(\r\n        `http://localhost:7000/thief/orderbysummoney`\r\n      );\r\n      setTThiefThreeRank(getThreeThief.data.data);\r\n    } else if (e.target.value === \"วันที่โกงล่าสุด\") {\r\n      setTitleSort(e.target.value);\r\n      const getThief = await Axios.get(\r\n        `http://localhost:7000/thief/rankdatetime`\r\n      );\r\n      setThiefRank(getThief.data.data);\r\n      const getThreeThief = await Axios.get(\r\n        `http://localhost:7000/thief/orderbydatetimes`\r\n      );\r\n      setTThiefThreeRank(getThreeThief.data.data);\r\n    } else if (e.target.value === \"จำนวนครั้งที่โกงมากที่สุด\") {\r\n      setTitleSort(e.target.value);\r\n      const getThief = await Axios.get(`http://localhost:7000/thief/rankcount`);\r\n      setThiefRank(getThief.data.data);\r\n      const getThreeThief = await Axios.get(\r\n        `http://localhost:7000/thief/orderbycount`\r\n      );\r\n      setTThiefThreeRank(getThreeThief.data.data);\r\n    }\r\n  };\r\n  useMemo(async () => {\r\n    await getInitCount();\r\n    await GetInitThiefThreeRank();\r\n    await GetPost();\r\n    setLoading(false);\r\n  }, []);\r\n  return loading ? (\r\n    \"\"\r\n  ) : (\r\n    <div onClick={() => Hiddendropdown()}>\r\n      <NavbarPage\r\n        SetshowDropdown={SetshowDropdown}\r\n        showDropdown={showDropdown}\r\n      />\r\n      <h1 className=\"h1-ranking\">\r\n        จัดอันดับคนโกง\r\n        <span className=\"rank-sort-head\">\r\n          เรียงตาม: <span>{TitleSort}</span>\r\n        </span>\r\n      </h1>\r\n      <div className=\"container2-rank\">\r\n        <div className=\"row\">\r\n          {ThiefThreeRank\r\n            ? ThiefThreeRank.map((element, index) => {\r\n                return (\r\n                  <div className=\"column3-rank\" key={index}>\r\n                    <div className={`coin${index + 1}-rank rank-rank1`}>\r\n                      {index + 1}\r\n                    </div>\r\n                    <MDBCard>\r\n                      <div className=\"emty-rank\"></div>\r\n                      <MDBCardBody cascade className=\"text-center\">\r\n                        <p className=\"text3-rank\">\r\n                          เลขที่บัญชี : {element.accountnumber} <br />\r\n                          ธนาคาร : {element.bank}\r\n                        </p>\r\n                        <p className=\"text4-rank\">\r\n                          จำนวนครั้งที่ถูกแจ้ง : {element.count} ครั้ง <br />\r\n                          ยอดทั้งหมด : {element.summoney.toLocaleString(undefined, {maximumFractionDigits:2})} บาท\r\n                          <br />\r\n                          ล่าสุด :{\" \"}\r\n                          {moment(\r\n                            new Date(element.wanteedon.seconds * 1000)\r\n                          ).format('MM/DD/YYYY HH:mm')}\r\n                        </p>\r\n                        <a\r\n                          onClick={() => RankSeePost(element.accountnumber)}\r\n                          className=\"orange-text mt-1 d-flex justify-content-end align-items-center\"\r\n                        >\r\n                          <div className=\"readmore-rank\">\r\n                            ดูโพสต์ที่เกี่ยวข้องทั้งหมด{\" \"}\r\n                            <MDBIcon\r\n                              icon=\"chevron-right\"\r\n                              className=\"ml-2\"\r\n                              size=\"sm\"\r\n                            ></MDBIcon>\r\n                          </div>\r\n                        </a>\r\n                      </MDBCardBody>\r\n                    </MDBCard>\r\n                  </div>\r\n                );\r\n              })\r\n            : null}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"container-ranking\">\r\n        <div className=\"rank-sorting\">\r\n          <select\r\n            as=\"select\"\r\n            name=\"rank-sort\"\r\n            className=\"rank-sort-select\"\r\n            onChange={(e) => {\r\n              SelectClick(e);\r\n            }}\r\n          >\r\n            <option\r\n              selected\r\n              value=\"จำนวนครั้งที่โกงมากที่สุด\"\r\n              className=\"rank-option\"\r\n            >\r\n              จำนวนครั้งที่โกงมากที่สุด\r\n            </option>\r\n            <option value=\"ยอดเงินที่โกงสูงสุด\" className=\"rank-option\">\r\n              ยอดเงินที่โกงสูงสุด\r\n            </option>\r\n            <option value=\"วันที่โกงล่าสุด\" className=\"rank-option\">\r\n              วันที่โกงล่าสุด\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n\r\n          <div className=\"rank-column-row row\">\r\n            <div className=\"rank-column cell col-1\">อันดับ</div>\r\n            <div className=\"rank-column cell col\">ชื่อ</div>\r\n            <div className=\"rank-column cell col\">นามสกุล</div>\r\n            <div className=\"rank-column cell col\">เลขที่บัญชี</div>\r\n            <div className=\"rank-column cell col\">ยอดเงินทั้งหมด</div>\r\n            <div className=\"rank-column cell col\">จำนวนครั้งที่โกง</div>\r\n            <div className=\"rank-column cell col\">วันที่โกง</div>\r\n          </div>\r\n\r\n        {ThiefRank\r\n          ? ThiefRank.map((element, index) => {\r\n              return (\r\n\r\n                  <div className=\"rank-data-row row\">\r\n                    <div className=\"rank-column cell col-1\">{index + 1}</div>\r\n                    <div className=\"rank-column cell col\">\r\n                      <span>{element.name}</span>\r\n                    </div>\r\n                    <div className=\"rank-column cell col\">{element.surname}</div>\r\n                    <div className=\"rank-column cell col\">{element.accountnumber}</div>\r\n                    <div className=\"rank-column cell col\">{element.summoney.toLocaleString(undefined, {maximumFractionDigits:2})}<span>&nbsp;บาท</span></div>\r\n                    <div className=\"rank-column cell col\">{element.count}</div>\r\n                    <div className=\"rank-column cell col\">\r\n                      {moment(new Date(element.wanteedon.seconds * 1000)).format(\r\n                        'MM/DD/YYYY HH:mm'\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n              );\r\n            })\r\n          : null}\r\n      </div>\r\n      <Chatbot />\r\n    </div>\r\n  );\r\n};\r\nexport default Rank;\r\n"]},"metadata":{},"sourceType":"module"}